# 북글북글 프로젝트 외부 서비스 정보

## 개요
본 문서는 북글북글 프로젝트에서 사용하는 외부 서비스 정보를 정리합니다.
소설 인증, 포트 클라우드, 코드 컴파일 등에 활용된 '외부 서비스'가입 및 활용에 필요한 정보를 포함합니다.

## 1. 소셜 인증 서비스

### 1.1 구글 로그인 (Google OAuth 2.0)
- **서비스 용도**: 사용자 소셜 로그인 인증
- **API 엔드포인트**: Google Identity Platform
- **클라이언트 ID**: your client id
- **설정 파일**: 
  - Android: `bookglebookgle-android/app/google-services.json`
  - Server: `GoogleTokenVerifier.java`
- **필요 권한**: 
  - 이메일 주소 읽기
  - 기본 프로필 정보 읽기

### 1.2 카카오 로그인 (Kakao OAuth 2.0)
- **서비스 용도**: 사용자 소셜 로그인 인증
- **API 엔드포인트**: `https://kapi.kakao.com/v2/user/me`
- **클라이언트 ID**: 환경변수 `KAKAO_CLIENT_ID`로 설정
- **서비스 클래스**: `KakaoOAuthService.java`
- **필요 권한**:
  - 카카오계정 이메일
  - 카카오계정 프로필 정보

## 2. 포트 클라우드 서비스

### 2.1 SMTP 이메일 서비스 (Gmail SMTP)
- **서비스 용도**: 이메일 인증 및 알림 발송
- **SMTP 서버**: `smtp.gmail.com:587`
- **인증 방식**: TLS/STARTTLS
- **환경변수**: 
  - `MAIL_USERNAME`: Gmail 계정
  - `MAIL_PASSWORD`: Gmail 앱 비밀번호
- **설정 위치**: `application.yml`

### 2.2 Firebase Cloud Messaging (FCM)
- **서비스 용도**: 모바일 푸시 알림
- **프로젝트 ID**: 환경변수 `FIREBASE_PROJECT_ID`
- **서비스 계정 키**: `service-account.json`
- **서비스 클래스**: `FcmService.java`, `FcmGroupService.java`
- **주요 기능**:
  - 개별 사용자 알림
  - 그룹 알림
  - 스케줄링된 알림

### 2.3 Redis 캐시 서비스
- **서비스 용도**: 세션 관리, 채팅 메시지 임시 저장, AI 응답 캐싱
- **연결 정보**: 
  - 호스트: `redis` (Docker 내부) / `localhost:6379` (로컬)
  - 포트: 6379
  - 데이터베이스: 0번
- **서비스 클래스**: 
  - `RedisConnectionManager.py`
  - `RedisCacheManager.py`
  - `RedisChatStorage.py`

## 3. 코드 컴파일 및 AI 서비스

### 3.1 GMS API (SSAFY Anthropic Proxy)
- **서비스 용도**: AI 채팅, 토론 생성, 교정 서비스
- **API 엔드포인트**: `https://gms.ssafy.io/gmsapi/api.anthropic.com/v1`
- **사용 모델**:
  - 개발용: `claude-3-5-haiku-latest`
  - 운영용: `claude-3-5-sonnet-latest`
- **환경변수**: `GMS_API_KEY`
- **서비스 클래스**: `LLMClient.py`
- **주요 기능**:
  - 토론 AI 대화 생성
  - 퀴즈 생성
  - 텍스트 교정

### 3.2 OCR 서비스 (자체 구축)
- **서비스 용도**: PDF 이미지에서 텍스트 추출
- **기술 스택**: 
  - Tesseract OCR
  - PaddleOCR (백업)
- **gRPC 엔드포인트**: `bgbgaiai-server:50505`
- **서비스 클래스**: 
  - `tesseract_ocr.py`
  - `paddleocr_engine.py`
- **지원 언어**: 한국어, 영어

### 3.3 Vector Database (ChromaDB)
- **서비스 용도**: 문서 임베딩 저장 및 유사도 검색
- **라이브러리**: `chromadb>=0.4.17,<0.7.0`
- **임베딩 모델**: `sentence-transformers==5.0.0`
- **서비스 클래스**: `vector_db.py`

## 4. 데이터베이스 서비스

### 4.1 MySQL 8.4
- **서비스 용도**: 메인 데이터베이스
- **연결 정보**:
  - 호스트: `mysql` (Docker 내부) / `localhost:3306` (로컬)
  - 데이터베이스: `bookglebookgle`
  - 사용자: `root`
- **환경변수**: 
  - `DB_USERNAME`: 데이터베이스 사용자명
  - `DB_PASSWORD`: 데이터베이스 비밀번호
  - `DB_URL`: JDBC 연결 URL

## 5. 모니터링 서비스

### 5.1 Grafana 모니터링
- **서비스 용도**: 시스템 모니터링 및 로그 시각화
- **접속 정보**: 
  - URL: `http://localhost:3001`
  - 관리자 계정: `admin/admin1234`
- **데이터 소스**: Loki, Prometheus

### 5.2 Prometheus 메트릭 수집
- **서비스 용도**: 시스템 메트릭 수집
- **접속 정보**: `http://localhost:9090`
- **설정 파일**: `prometheus/prometheus.yml`

### 5.3 Loki 로그 수집
- **서비스 용도**: 중앙화된 로그 수집
- **포트**: 3100
- **로그 수집기**: Promtail

## 6. 개발 도구 및 라이브러리

### 6.1 gRPC 통신
- **버전**: `grpcio==1.64.0`
- **프로토콜 정의**: 
  - `ai_service.proto`
  - `chat.proto`
  - `pdf_sync.proto`
- **포트**: 6565 (Spring Boot 내장 gRPC 서버)

### 6.2 WebSocket 통신
- **라이브러리**: `websockets==15.0.1`
- **용도**: 실시간 채팅 통신

## 환경변수 설정 가이드

### Spring Boot (.env 파일)
```env
# 데이터베이스
DB_USERNAME=root
DB_PASSWORD=your_mysql_password
DB_URL=jdbc:mysql://mysql:3306/bookglebookgle

# JWT 토큰
JWT_ACCESS_SECRET=your_jwt_access_secret
JWT_REFRESH_SECRET=your_jwt_refresh_secret

# 이메일 서비스
MAIL_USERNAME=your_gmail@gmail.com
MAIL_PASSWORD=your_gmail_app_password

# 소셜 로그인
KAKAO_CLIENT_ID=your_kakao_client_id

# Firebase
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_CREDENTIALS_BASE64=your_base64_encoded_service_account
```

### AI 서비스 (.env 파일)
```env
# GMS API
GMS_API_KEY=your_gms_api_key
GMS_BASE_URL=https://gms.ssafy.io/gmsapi/api.anthropic.com/v1

# 데이터베이스
MYSQL_HOST=mysql
MYSQL_USER=root
MYSQL_PASSWORD=your_mysql_password
MYSQL_DATABASE=bookglebookgle

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
```
# ==============================================================================
# BGBG (BookGle BookGle) 독서 모임 AI Server Configuration for EC2 NEW DEPLOYMENT
# ==============================================================================
# 새로운 포트 설정: gRPC 50505, REST 8789
# 기존 Docker와 병행 운영을 위한 새 배포 설정
# ==============================================================================

# 🚀 NEW PORT CONFIGURATION
# 서버 설정 (새 포트)
SERVER_HOST=0.0.0.0
SERVER_PORT=50505         # gRPC 포트 (기존: 50052 → 새: 50505)
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8789         # REST API 포트 (기존: 8000 → 새: 8789)
DEBUG=false
LOG_LEVEL=INFO

# gRPC 서버 설정
GRPC_MAX_WORKERS=10
GRPC_MAX_MESSAGE_LENGTH=4194304

# 데이터베이스 설정 (실제 DB 정보로 수정 필요)
DATABASE__MYSQL_HOST=localhost
DATABASE__MYSQL_PORT=3306
DATABASE__MYSQL_USER=root
DATABASE__MYSQL_PASSWORD=<YOUR_MYSQL_PASSWORD_HERE>
DATABASE__MYSQL_DATABASE=bgbg_ai

# Redis 설정
DATABASE__REDIS_HOST=localhost
DATABASE__REDIS_PORT=6379
DATABASE__REDIS_DB=0

# AI 서비스 API 키 설정 (실제 API 키로 수정 필요)
AI__OPENAI_API_KEY=<YOUR_OPENAI_API_KEY_HERE>
AI__ANTHROPIC_API_KEY=<YOUR_ANTHROPIC_API_KEY_HERE>

# Gemini API 설정 (직접 사용)
AI__GEMINI_API_KEY=AIzaSyCBHb5ZS4Cz9If1zqHkXAxQyZ-Kk1TGgSE
AI__GEMINI_MODEL=gemini-2.0-flash
AI__GEMINI_BASE_URL=https://generativelanguage.googleapis.com/v1beta

# OpenRouter 설정 (비활성화 - Gemini 직접 사용으로 변경)
# AI__OPENROUTER_API_KEY=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
# AI__OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
# AI__OPENROUTER_MODEL=google/gemini-2.5-flash-lite


# 기능 플래그 (AI 기능 활성화)
AI__ENABLE_QUIZ_GENERATION=true
AI__ENABLE_PROOFREADING=true
AI__ENABLE_DISCUSSION_AI=true

# 벡터 DB 설정 (ChromaDB)
VECTOR_DB__COLLECTION_NAME=bgbg_documents
VECTOR_DB__EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
VECTOR_DB__PERSIST_DIRECTORY=./data/chroma
VECTOR_DB__CHUNK_SIZE=1000
VECTOR_DB__CHUNK_OVERLAP=200

# OCR 최적화 설정
OCR_PRIMARY_ENGINE=tesseract
OCR_CONFIDENCE_THRESHOLD=0.1
OCR_MAX_IMAGE_SIZE=1536
OCR_DPI=200
OCR_ENABLE_PREPROCESSING=false

# 성능 최적화
OMP_NUM_THREADS=2
OPENBLAS_NUM_THREADS=2
MALLOC_ARENA_MAX=2
CUDA_VISIBLE_DEVICES=""

# 모니터링
PROMETHEUS_PORT=9090
ENABLE_METRICS=true

# 보안 설정
CORS_ORIGINS=["*"]
MAX_UPLOAD_SIZE=52428800  # 50MB

# 로깅 설정
LOG_FORMAT=json
LOG_ROTATION="10 MB"
LOG_RETENTION="30 days" 